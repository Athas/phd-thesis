\documentclass[11pt,final,a4paper,oneside,openany]{memoir}

\usepackage[hyperindex,hidelinks]{hyperref}
\usepackage[capitalise,noabbrev]{cleveref}
\usepackage[final]{graphicx}


\input{defaultprelude.tex}

\usepackage[english, science, titlepage]{ku-frontpage}

\input{futhark.tex}
\renewcommand{\ttdefault}{pcr}

\assignment{PhD thesis}
\author{Troels Henriksen --- \texttt{athas@sigkill.dk}}
\date{August, 2017}

\title{Design and Implementation of the~\\Futhark Programming Language~\\(Revised)}
\subtitle{}
\advisor{Supervisors: Cosmin Eugen Oancea and Fritz Henglein}
\frontpageimage{img/hedgehog.jpg}

% Write "Part II" etc. in TOC instead of just "II"
\renewcommand*{\cftpartname}{Part\space}

\bibliography{thesis}

\begin{document}
\frontmatter

 \clearpage

\maketitle
~
\vspace{3cm}

\input{abstract.tex}

\setlength{\cftpartnumwidth}{4em}

% \clearpage
%  ~\thispagestyle{empty}
\clearpage
\tableofcontents*
%\openany
\newpage
\input{preface.tex}
%\openright
\mainmatter
\counterwithout{table}{chapter}
\counterwithout{figure}{chapter}

\part{Land, Logic, and Language}

\lstset{language={futhark},
  numbers=none,
  moredelim=**[is][\color{red}]{@}{@},
  xleftmargin=1cm,
}

\input{intro.tex}

\input{philosophy}

\input{formalism.tex}

\input{hardware.tex}

\part{An Optimising Compiler}

\lstset{
  language={corefuthark},
  numbers=none,
  moredelim=**[is][\color{red}]{@}{@},
  xleftmargin=1cm,
}

\input{compiler.tex}

\input{size-analysis.tex}

\input{fusion.tex}

\input{kernel-extraction.tex}

\input{tiling.tex}

\lstset{
  language={futhark},
  numbers=none,
  moredelim=**[is][\color{red}]{@}{@},
  xleftmargin=1cm,
}

\input{empirical-validation.tex}

\clearpage

\part{Closing Credits}

\input{conclusions.tex}

% We want the bibliography in the ToC, but it shouldn't have a chapter
% number.
\phantomsection
\addcontentsline{toc}{chapter}{Bibliography}
\defbibheading{bibliography}{\chapter*{Bibliography}}
\printbibliography

\backmatter
\appendix
\input{appendix.tex}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-engine: xetex
%%% End:
