\documentclass[11pt,draft,a4paper,oneside,openany]{memoir}

\usepackage[final]{graphicx}

% The ku-forside package breaks lots of things, so define it first
% such that my prelude can fix it.
\usepackage[titelside,en,nat]{ku-forside}

\input{defaultprelude.tex}
\input{futhark.tex}
\renewcommand{\ttdefault}{pcr}

\titel{Design and Implementation of the}
\undertitel{Futhark Programming Language}
\forfatter{Troels Henriksen -- \texttt{athas@sigkill.dk}}
\forfatterET{}
\forfatterTO{}
\opgave{PhD thesis} % Findes kun under 'titelside'
\dato{August, 2017}
\vejleder{Supervisors: Cosmin Eugen Oancea and Fritz Henglein}

% Write "Part II" etc. in TOC instead of just "II"
\renewcommand*{\cftpartname}{Part\space}

\bibliography{thesis}

\begin{document}
\frontmatter

 \clearpage

\maketitle
~
\vspace{3cm}
  \begin{abstract}
\input{abstract.tex}
  \end{abstract}

\setlength{\cftpartnumwidth}{4em}

% \clearpage
%  ~\thispagestyle{empty}
\clearpage
\tableofcontents*
%\openany
\newpage
\input{preface.tex}
%\openright
\mainmatter
\counterwithout{table}{chapter}
\counterwithout{figure}{chapter}

\part{Land, Logic, and Language}

\lstset{language={futhark}}

\input{intro.tex}

\input{philosophy}

\input{formalism.tex}

\input{hardware.tex}

\part{An Optimising Compiler}

\lstset{
  language={corefuthark},
  numbers=none,
}

\input{compiler.tex}

\input{size-analysis.tex}

\input{fusion.tex}

\input{kernel-extraction.tex}

\input{tiling.tex}

\input{empirical-validation.tex}

\input{interoperability.tex}

\clearpage

\part{Closing Credits}

% We want the bibliography in the ToC, but it shouldn't have a chapter
% number.
\phantomsection
\addcontentsline{toc}{chapter}{Bibliography}
\defbibheading{bibliography}{\chapter*{Bibliography}}
\printbibliography

\backmatter
\appendix
\input{appendix.tex}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-engine: xetex
%%% End:
